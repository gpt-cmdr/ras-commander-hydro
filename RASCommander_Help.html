<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAS Commander Toolbox Help</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.2em;
        }
        .tool-section {
            background-color: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tool-section h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .tool-section h3 {
            color: #34495e;
            margin-top: 20px;
        }
        .parameter {
            background-color: #ecf0f1;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #3498db;
            border-radius: 3px;
        }
        .parameter h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #f39c12;
            padding: 15px;
            margin: 20px 0;
            border-radius: 3px;
        }
        .warning h4 {
            margin: 0 0 10px 0;
            color: #856404;
        }
        .note {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 3px;
        }
        ul {
            margin: 10px 0;
            padding-left: 30px;
        }
        code {
            background-color: #f8f9fa;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>RAS Commander Toolbox</h1>
        <p>ArcGIS Python Toolbox for HEC-RAS HDF5 Data Integration</p>
    </div>

    <div class="tool-section">
        <h2>Overview</h2>
        <p>The RAS Commander Toolbox provides tools for loading and visualizing HEC-RAS 2D geometry, terrain, and results data from HDF5 files directly within ArcGIS Pro. This toolbox is a direct port of the HDF5 data extraction logic from the <a href="https://github.com/gpt-cmdr/ras-commander">ras-commander library</a>.</p>
        
        <h3>Sponsorship</h3>
        <p>The development and porting of these tools to the ArcGIS platform was generously sponsored by <a href="https://clbengineering.com/">CLB Engineering</a> in cooperation with ESRI.</p>
        
        <h3>Requirements</h3>
        <ul>
            <li>ArcGIS Pro 2.8 or higher</li>
            <li>HEC-RAS 6.x model files</li>
            <li>Python packages: h5py, numpy (included with ArcGIS Pro)</li>
        </ul>
    </div>

    <div class="tool-section">
        <h2>Load HEC-RAS 2D Geometry Layers</h2>
        <p>This tool extracts 2D geometry elements from HEC-RAS geometry (<code>g*.hdf</code>) or plan (<code>p*.hdf</code>) files.</p>
        
        <h3>Available Geometry Elements</h3>
        <ul>
            <li><strong>2D Breaklines</strong> - Mesh refinement lines with cell spacing attributes</li>
            <li><strong>2D Boundary Condition Lines</strong> - External and internal boundary conditions</li>
            <li><strong>Mesh Area Perimeters</strong> - 2D flow area boundaries</li>
            <li><strong>Mesh Cell Centers</strong> - Point locations at the center of each mesh cell</li>
            <li><strong>Mesh Cell Faces</strong> - Line geometries representing cell edges</li>
            <li><strong>Mesh Cells (Polygons)</strong> - Full polygon representation of mesh cells</li>
            <li><strong>Pipe Conduits</strong> - Storm/sewer pipe networks (if present)</li>
            <li><strong>Pipe Nodes</strong> - Junction points in pipe networks (if present)</li>
        </ul>
        
        <div class="note">
            <h4>Performance Note</h4>
            <p>Mesh cell polygon creation can be time-consuming for large meshes (>100,000 cells). Consider extracting only the necessary elements for your analysis.</p>
        </div>
        
        <h3>Parameters</h3>
        <div class="parameter">
            <h4>Geometry or Plan HDF File</h4>
            <p>Select a HEC-RAS geometry file (<code>g*.hdf</code>) or plan file (<code>p*.hdf</code>) containing 2D geometry data.</p>
        </div>
        <div class="parameter">
            <h4>Override CRS (Optional)</h4>
            <p>Specify a coordinate reference system if it cannot be determined from the HEC-RAS project files. The tool will first attempt to read the CRS from the HDF file or associated .prj files.</p>
        </div>
        <div class="parameter">
            <h4>Geometry Elements to Load</h4>
            <p>Select one or more geometry elements to extract. Each selected element will create a separate output feature class.</p>
        </div>
    </div>

    <div class="tool-section">
        <h2>Load HEC-RAS 2D Results Summary Layers</h2>
        <p>This tool extracts summary results data from HEC-RAS plan files (<code>p*.hdf</code>) that contain simulation results.</p>
        
        <h3>Available Results</h3>
        <ul>
            <li><strong>Max WSE at Cell Centers</strong> - Maximum water surface elevation achieved at each cell center during the simulation, with the time of occurrence</li>
            <li><strong>Max Vel at Cell Faces</strong> - Maximum velocity achieved at each cell face during the simulation, with the time of occurrence</li>
        </ul>
        
        <div class="warning">
            <h4>Important</h4>
            <p>This tool requires a plan HDF file that contains results data. Geometry-only files will not work.</p>
        </div>
        
        <h3>Parameters</h3>
        <div class="parameter">
            <h4>Plan HDF File with Results</h4>
            <p>Select a HEC-RAS plan file (<code>p*.hdf</code>) that contains simulation results.</p>
        </div>
        <div class="parameter">
            <h4>Override CRS (Optional)</h4>
            <p>Specify a coordinate reference system if it cannot be determined from the HEC-RAS project files.</p>
        </div>
        <div class="parameter">
            <h4>Results to Load</h4>
            <p>Select one or more results types to extract. Each selected result will create a separate output feature class.</p>
        </div>
    </div>

    <div class="tool-section">
        <h2>Load HEC-RAS Terrain</h2>
        <p>This tool reads terrain layer definitions from a HEC-RAS project's <code>.rasmap</code> file and loads the associated VRT (Virtual Raster) files into ArcGIS Pro.</p>
        
        <div class="warning">
            <h4>Important Limitations</h4>
            <ul>
                <li>This tool loads the underlying terrain TIFFs as a VRT with the priority from HEC-RAS in place</li>
                <li>It does <strong>NOT</strong> include terrain modifications done as vector terrain modifications in RAS Mapper</li>
                <li>Only the base terrain raster data will be loaded</li>
                <li>If your HEC-RAS model includes vector terrain modifications (breaklines, high ground, etc.), those modifications will not be reflected in the loaded terrain</li>
            </ul>
        </div>
        
        <h3>How It Works</h3>
        <ol>
            <li>Reads the <code>.rasmap</code> file associated with your HEC-RAS project</li>
            <li>Finds all terrain layers defined in the project</li>
            <li>Loads the corresponding VRT files that reference the underlying TIFF files</li>
            <li>Applies the layer priority as defined in HEC-RAS</li>
        </ol>
        
        <h3>Parameters</h3>
        <div class="parameter">
            <h4>HEC-RAS Project File (*.prj)</h4>
            <p>Select the HEC-RAS project file. The tool will automatically find the associated <code>.rasmap</code> file in the same directory.</p>
        </div>
        <div class="parameter">
            <h4>Import All Terrains</h4>
            <p>Check this box to import all terrain layers found in the project. When checked, the terrain selection list will be disabled.</p>
        </div>
        <div class="parameter">
            <h4>Terrains to Load</h4>
            <p>Select specific terrain layers to load. This list is populated from the terrains found in the <code>.rasmap</code> file.</p>
        </div>
    </div>

    <div class="tool-section">
        <h2>Common Issues and Solutions</h2>
        
        <h3>CRS Not Found</h3>
        <p>If the tool cannot determine the coordinate reference system:</p>
        <ul>
            <li>Check if a <code>.prj</code> file exists in your HEC-RAS project directory</li>
            <li>Use the "Override CRS" parameter to manually specify the correct projection</li>
        </ul>
        
        <h3>Field Name Conflicts</h3>
        <p>The tool automatically handles field name conflicts with ArcGIS system fields by:</p>
        <ul>
            <li>Renaming "Shape" to "Shape_Type"</li>
            <li>Appending "_USER" to other conflicting field names</li>
            <li>Replacing special characters with underscores</li>
        </ul>
        
        <h3>Large Dataset Performance</h3>
        <p>For models with large meshes:</p>
        <ul>
            <li>Consider extracting elements to file geodatabases instead of in-memory workspaces</li>
            <li>Extract only the necessary elements for your analysis</li>
            <li>Process mesh cells in smaller 2D flow areas if possible</li>
        </ul>
    </div>

    <div class="footer">
        <p><strong>RAS Commander Toolbox</strong> | Sponsored by <a href="https://clbengineering.com/">CLB Engineering</a></p>
        <p>Based on the <a href="https://github.com/gpt-cmdr/ras-commander">ras-commander library</a></p>
    </div>
</body>
</html>